<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login Premium</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-800 text-white min-h-screen flex items-center justify-center">

  <div id="loginView" class="w-full max-w-md p-8 bg-gray-900 rounded-xl shadow-xl space-y-5">
    <h1 class="text-2xl font-bold text-center text-indigo-400">🔐 Login Premium</h1>
    
    <input id="username" type="text" placeholder="Username"
      class="w-full px-4 py-2 rounded bg-gray-800 text-white border border-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500" />

    <input id="password" type="password" placeholder="Password"
      class="w-full px-4 py-2 rounded bg-gray-800 text-white border border-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500" />

    <button id="loginBtn"
      class="w-full py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded font-semibold transition">
      Login
    </button>

    <p id="status" class="text-center text-sm text-red-400 h-5"></p>
    <div class="text-center text-sm">
      Belum punya akses? <a href="https://wa.me/6289620004252" target="_blank" class="text-green-400 underline">Buy Access</a>
    </div>
  </div>

  <div id="mainView" class="hidden w-full max-w-md p-8 bg-gray-900 rounded-xl shadow-xl space-y-5 text-center">
    <h2 class="text-2xl font-bold text-green-400">Selamat datang 👋</h2>
    <p id="welcomeUser" class="text-indigo-300"></p>
    <button id="logoutBtn" class="mt-4 px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded">
      Logout
    </button>
  </div>

  <script>
    const usersUrl = 'https://raw.githubusercontent.com/khusnimr/Website-WaysModzz/refs/heads/main/users.json';  
  
const loginView = document.getElementById('loginView');  
const mainView = document.getElementById('mainView');  
const usernameInput = document.getElementById('username');  
const passwordInput = document.getElementById('password');  
const loginBtn = document.getElementById('loginBtn');  
const logoutBtn = document.getElementById('logoutBtn');  
const welcomeUser = document.getElementById('welcomeUser');  
  
const phoneInput = document.getElementById('phone');  
const statusEl = document.getElementById('status');  
  
if (matchMedia('(prefers-color-scheme: dark)').matches)  
  document.body.classList.add('dark');  
  
async function fetchUsers() {
  try {
    const res = await fetch(usersUrl);
    if (!res.ok) throw new Error('Gagal mengambil data user');
    const data = await res.json();
    console.log('Data user terambil:', data); // Tambahkan ini buat debug
    return data;
  } catch (e) {
    console.error(e);
    return null;
  }
}
  
async function checkCredentials(user, pass) {
  const usersData = await fetchUsers();
  if (!usersData) return false;
  
  return usersData.some(u => u.username === user && u.password === pass);
}

    function showMain(user) {  
  welcomeUser.textContent = `Welcome, ${user}`;  
  loginView.classList.add('hidden');  
  mainView.classList.remove('hidden');  
}  
  
loginBtn.addEventListener('click', async () => {  
  const u = usernameInput.value.trim();  
  const p = passwordInput.value.trim();  
  if (!u || !p) {  
 alert('Isi semua kolom');  
 return;  
  }  
  loginBtn.disabled = true;  
  const ok = await checkCredentials(u, p);  
  loginBtn.disabled = false;  
  if (!ok) {  
 alert('Username atau password salah');  
 return;  
  }  
  localStorage.setItem('username', u);  
  showMain(u);  
});  
  
logoutBtn.onclick = () => {  
  localStorage.removeItem('username');  
  location.reload();  
};  
  
window.onload = () => {  
  const saved = localStorage.getItem('username');  
  if (saved) showMain(saved);  
};  
  
 async function sendForcecall() {  
const phone = phoneInput.value.trim();  
if (!phone) {  
  statusEl.textContent = '❌ Nomor belum diisi';  
  return;  
}  
statusEl.textContent = '⏳ Mengirim Forcecall...';  
try {  
  const res = await fetch(`/api/bug/forceall?target=${encodeURIComponent(phone)}`);  
  const data = await res.json();  
  statusEl.textContent = data.status ? '✅ Forcecall berhasil!' : `⚠️ Gagal: ${data.message || data.error || 'Unknown'}`;  
} catch (err) {  
  console.error(err);  
  statusEl.textContent = '🚫 Gagal terhubung ke API';  
}  
 }  
  
  async function sendDelay() {  
const phone = phoneInput.value.trim();  
if (!phone) {  
  statusEl.textContent = '❌ Nomor belum diisi';  
  return;  
}  
statusEl.textContent = '⏳ Mengirim Forcecall...';  
try {  
  const res = await fetch(`/api/bug/delay?target=${encodeURIComponent(phone)}`);  
  const data = await res.json();  
  statusEl.textContent = data.status ? '✅ Forcecall berhasil!' : `⚠️ Gagal: ${data.message || data.error || 'Unknown'}`;  
} catch (err) {  
  console.error(err);  
  statusEl.textContent = '🚫 Gagal terhubung ke API';  
}  
 }
  
 async function sendCarousels() {  
const phone = phoneInput.value.trim();  
if (!phone) {  
  statusEl.textContent = '❌ Nomor belum diisi';  
  return;  
}  
statusEl.textContent = '⏳ Mengirim Forcecall...';  
try {  
  const res = await fetch(`/api/bug/ios?target=${encodeURIComponent(phone)}`);  
  const data = await res.json();  
  statusEl.textContent = data.status ? '✅ Forcecall berhasil!' : `⚠️ Gagal: ${data.message || data.error || 'Unknown'}`;  
} catch (err) {  
  console.error(err);  
  statusEl.textContent = '🚫 Gagal terhubung ke API';  
}  
}  
  
 document.getElementById('btnDelay').onclick = sendDelay;  
 document.getElementById('btnAndroid').onclick = sendForcecall;  
 document.getElementById('btnIOS').onclick = sendCarousels;  
  </script> 
</body>  
</html>  
